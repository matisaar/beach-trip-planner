<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Amalfi Coast Airbnbs ‚Äî 3D Explorer</title>
<script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');
  :root {
    --ocean: #0077b6; --ocean-dark: #023e8a; --ocean-light: #00b4d8;
    --sand: #f5e6d3; --sunset: #ff6b35; --coral: #e63946;
    --palm: #2d6a4f; --dark: #1a1a2e; --gray: #6b7280;
    --light: #f8fafc; --white: #ffffff; --gold: #f59e0b;
    --bg: #faf8f5; --border: #e8e4df; --card: #ffffff;
    --muted: #7a7a7a; --accent: #d4763c;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: 'Inter', -apple-system, sans-serif; background: var(--bg); color: var(--dark); line-height: 1.6; }

  .hero {
    background: linear-gradient(135deg, #1a472a 0%, #023e8a 50%, var(--ocean) 100%);
    color: white; padding: 40px 24px 30px; text-align: center;
  }
  .hero h1 { font-size: clamp(1.4rem, 3vw, 1.8rem); font-weight: 900; margin-bottom: 6px; }
  .hero p { font-size: 0.88rem; opacity: 0.8; margin-bottom: 14px; }
  .hero-nav { display: flex; gap: 8px; justify-content: center; flex-wrap: wrap; }
  .hero-nav a {
    color: rgba(255,255,255,0.8); text-decoration: none; font-size: 0.8rem;
    padding: 6px 16px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.25);
    transition: all 0.2s;
  }
  .hero-nav a:hover { background: rgba(255,255,255,0.15); color: white; }

  .stats-bar {
    display: flex; justify-content: center; gap: 28px; flex-wrap: wrap;
    padding: 14px 20px; background: var(--card); border-bottom: 1px solid var(--border);
  }
  .sb-item { text-align: center; }
  .sb-val { font-weight: 800; color: var(--ocean-dark); font-size: 1.05rem; }
  .sb-label { color: var(--muted); font-size: 0.72rem; text-transform: uppercase; letter-spacing: 0.5px; }

  .main { display: flex; min-height: calc(100vh - 180px); }

  .sidebar {
    width: 340px; min-width: 340px; background: var(--card);
    border-right: 1px solid var(--border); display: flex; flex-direction: column;
  }
  .sidebar-header { padding: 16px 18px; border-bottom: 1px solid var(--border); }
  .sidebar-header h3 { font-size: 0.85rem; font-weight: 700; margin-bottom: 10px; }
  .filter-row { display: flex; gap: 5px; flex-wrap: wrap; }
  .filter-btn {
    padding: 5px 11px; font-size: 0.72rem; font-weight: 600;
    border: 1px solid var(--border); background: var(--bg); color: var(--muted);
    border-radius: 8px; cursor: pointer; transition: all 0.2s; font-family: inherit;
  }
  .filter-btn:hover { border-color: var(--ocean); color: var(--ocean); }
  .filter-btn.active { background: var(--ocean); color: white; border-color: var(--ocean); }
  .search-box {
    margin-top: 10px; width: 100%; padding: 8px 12px;
    background: var(--bg); border: 1px solid var(--border); border-radius: 8px;
    color: var(--dark); font-size: 0.82rem; font-family: inherit; outline: none;
  }
  .search-box:focus { border-color: var(--ocean); }
  .search-box::placeholder { color: #aaa; }

  .sidebar-list { flex: 1; overflow-y: auto; padding: 8px; }
  .sidebar-list::-webkit-scrollbar { width: 5px; }
  .sidebar-list::-webkit-scrollbar-thumb { background: #ddd; border-radius: 3px; }

  .lc {
    padding: 11px 14px; border-radius: 10px; cursor: pointer;
    transition: all 0.15s; margin-bottom: 3px; border: 1px solid transparent;
  }
  .lc:hover { background: #f0f5ff; border-color: #dbe8ff; }
  .lc.highlighted { background: #e8f0fe; border-color: var(--ocean); }
  .lc-name { font-size: 0.82rem; font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
  .lc-meta { display: flex; align-items: center; gap: 8px; font-size: 0.72rem; color: var(--muted); margin-top: 3px; }
  .lc-price { font-weight: 700; }
  .lc-price.budget { color: var(--palm); }
  .lc-price.mid { color: var(--ocean); }
  .lc-price.splurge { color: var(--coral); }
  .lc-rating { color: var(--gold); font-weight: 600; }
  .lc-area {
    display: inline-block; font-size: 0.68rem; padding: 1px 7px;
    border-radius: 4px; background: var(--bg); color: var(--muted); margin-top: 3px;
  }
  .sidebar-count {
    padding: 10px 18px; font-size: 0.72rem; color: var(--muted);
    border-top: 1px solid var(--border); text-align: center;
  }

  .plot-wrap { flex: 1; position: relative; background: var(--bg); }
  #plot3d { width: 100%; height: 100%; min-height: 500px; }

  .how-to-read {
    position: absolute; bottom: 16px; left: 16px;
    background: var(--card); border: 1px solid var(--border); border-radius: 12px;
    padding: 14px 18px; font-size: 0.75rem; color: var(--muted); line-height: 1.9;
    box-shadow: 0 3px 12px rgba(0,0,0,0.06); z-index: 100; max-width: 250px;
  }
  .how-to-read b { color: var(--dark); font-weight: 700; }
  .dot { display: inline-block; width: 10px; height: 10px; border-radius: 50%; margin-right: 4px; vertical-align: middle; }
  .dot.green { background: var(--palm); }
  .dot.blue { background: var(--ocean); }
  .dot.red { background: var(--coral); }

  .controls-hint {
    position: absolute; top: 14px; left: 50%; transform: translateX(-50%);
    background: var(--card); border: 1px solid var(--border); border-radius: 10px;
    padding: 8px 18px; font-size: 0.72rem; color: var(--muted); z-index: 100;
    display: flex; gap: 16px; box-shadow: 0 2px 8px rgba(0,0,0,0.04);
    transition: opacity 0.5s;
  }
  .controls-hint kbd {
    background: var(--bg); padding: 1px 6px; border-radius: 4px;
    font-size: 0.68rem; color: var(--dark); font-family: inherit; border: 1px solid var(--border);
  }

  .sweet-spot {
    position: absolute; top: 14px; right: 16px;
    background: linear-gradient(135deg, #dcfce7, #d1fae5);
    border: 1px solid #86efac; border-radius: 12px;
    padding: 12px 16px; font-size: 0.78rem; color: var(--palm); z-index: 100;
    box-shadow: 0 3px 12px rgba(45,138,78,0.1); max-width: 240px; line-height: 1.5;
  }
  .sweet-spot strong { font-weight: 800; }

  .detail-panel {
    position: fixed; top: 50%; right: 24px; transform: translateY(-50%);
    width: 300px; background: var(--card); border: 1px solid var(--border);
    border-radius: 16px; padding: 24px; z-index: 600;
    display: none; box-shadow: 0 12px 40px rgba(0,0,0,0.12);
  }
  .detail-panel.visible { display: block; animation: slideIn 0.25s ease; }
  @keyframes slideIn { from { opacity: 0; transform: translateY(-50%) translateX(20px); } to { opacity: 1; transform: translateY(-50%) translateX(0); } }
  .dp-close {
    position: absolute; top: 10px; right: 12px;
    background: none; border: none; color: var(--muted); font-size: 18px; cursor: pointer;
  }
  .dp-close:hover { color: var(--dark); }
  .dp-name { font-size: 1rem; font-weight: 800; margin-bottom: 2px; padding-right: 28px; }
  .dp-area { font-size: 0.78rem; color: var(--muted); margin-bottom: 14px; }
  .dp-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 14px; }
  .dp-stat { background: var(--bg); border-radius: 10px; padding: 12px; text-align: center; }
  .dp-stat .val { font-size: 1.2rem; font-weight: 800; color: var(--ocean-dark); }
  .dp-stat .val.price { color: var(--palm); }
  .dp-stat .label { font-size: 0.65rem; color: var(--muted); text-transform: uppercase; letter-spacing: 0.5px; margin-top: 2px; }
  .dp-badges { display: flex; gap: 5px; flex-wrap: wrap; margin-bottom: 14px; }
  .dp-badge { font-size: 0.7rem; font-weight: 600; padding: 3px 9px; border-radius: 6px; }
  .dp-badge.green { background: #dcfce7; color: var(--palm); }
  .dp-badge.blue { background: #dbeafe; color: var(--ocean); }
  .dp-badge.gold { background: #fef3c7; color: #92400e; }
  .dp-badge.red { background: #fee2e2; color: #991b1b; }
  .dp-book {
    display: block; width: 100%; padding: 12px; text-align: center;
    background: linear-gradient(135deg, #FF385C, #e31c5f); color: white;
    text-decoration: none; border-radius: 10px; font-size: 0.88rem;
    font-weight: 700; font-family: inherit; transition: all 0.2s;
  }
  .dp-book:hover { filter: brightness(1.1); transform: translateY(-1px); }

  @media (max-width: 900px) {
    .main { flex-direction: column; }
    .sidebar { width: 100%; min-width: unset; max-height: 280px; border-right: none; border-bottom: 1px solid var(--border); }
    .plot-wrap { min-height: 450px; }
    .how-to-read, .sweet-spot { display: none; }
  }
</style>
</head>
<body>

<div class="hero">
  <h1>üçã 3D Airbnb Explorer</h1>
  <p>Top 50 best-value stays on the Amalfi Coast ¬∑ Aug 22‚Äì29, 2026</p>
  <div class="hero-nav">
    <a href="best-trip.html">‚Üê Itinerary</a>
    <a href="airbnbs.html">All 280 Listings</a>
  </div>
</div>

<div class="stats-bar">
  <div class="sb-item"><div class="sb-val">50</div><div class="sb-label">Top Picks</div></div>
  <div class="sb-item"><div class="sb-val">$254/n</div><div class="sb-label">Avg Price</div></div>
  <div class="sb-item"><div class="sb-val">4.92</div><div class="sb-label">Avg Rating</div></div>
  <div class="sb-item"><div class="sb-val">$42/n</div><div class="sb-label">Cheapest</div></div>
  <div class="sb-item"><div class="sb-val">11</div><div class="sb-label">Budget</div></div>
  <div class="sb-item"><div class="sb-val">15</div><div class="sb-label">Splurge</div></div>
</div>

<div class="main">
  <div class="sidebar">
    <div class="sidebar-header">
      <h3>Sort & Filter</h3>
      <div class="filter-row">
        <button class="filter-btn active" data-sort="score">Best Value</button>
        <button class="filter-btn" data-sort="price-asc">Cheapest</button>
        <button class="filter-btn" data-sort="rating">Top Rated</button>
        <button class="filter-btn" data-sort="reviews">Most Reviews</button>
      </div>
      <input type="text" class="search-box" placeholder="Search name or area..." id="searchInput">
    </div>
    <div class="sidebar-list" id="sidebarList"></div>
    <div class="sidebar-count" id="sidebarCount"></div>
  </div>

  <div class="plot-wrap">
    <div id="plot3d"></div>

    <div class="controls-hint" id="controlsHint">
      <span><kbd>Drag</kbd> to rotate</span>
      <span><kbd>Scroll</kbd> to zoom</span>
      <span><kbd>Click</kbd> a dot for details</span>
    </div>

    <div class="sweet-spot">
      <strong>üéØ The Sweet Spot</strong><br>
      Look for dots near the <b>top-back</b> ‚Äî high ratings + lots of reviews. Green dots = cheapest!
    </div>

    <div class="how-to-read">
      <b>How to read this</b><br>
      <b>‚Üí Right</b> = more expensive<br>
      <b>‚Üë Up</b> = better rated<br>
      <b>‚Üó Depth</b> = more reviews<br><br>
      <span class="dot green"></span> <b>Budget</b> under $175/n<br>
      <span class="dot blue"></span> <b>Mid-range</b> $175‚Äì300/n<br>
      <span class="dot red"></span> <b>Splurge</b> over $300/n<br><br>
      Bigger dots = Guest Favorites
    </div>
  </div>
</div>

<div class="detail-panel" id="detailPanel">
  <button class="dp-close" onclick="closeDetail()">&times;</button>
  <div class="dp-name" id="dpName"></div>
  <div class="dp-area" id="dpArea"></div>
  <div class="dp-grid">
    <div class="dp-stat"><div class="val price" id="dpPrice"></div><div class="label">Per Night</div></div>
    <div class="dp-stat"><div class="val" id="dpTotal"></div><div class="label">7 Nights</div></div>
    <div class="dp-stat"><div class="val" id="dpRating"></div><div class="label">Rating</div></div>
    <div class="dp-stat"><div class="val" id="dpReviews"></div><div class="label">Reviews</div></div>
  </div>
  <div class="dp-badges" id="dpBadges"></div>
  <a class="dp-book" id="dpLink" href="#" target="_blank">View on Airbnb ‚Üí</a>
</div>

<script>
const allListings = [{"id": "6690135", "name": "Full relaxation", "area": "Agerola", "price": 185.0, "total": 1295.0, "rating": 4.8, "reviews": 619, "url": "https://www.airbnb.ca/rooms/6690135?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": false, "tier": "mid", "score": 142.3}, {"id": "2938612", "name": "unbelievable new house sea view", "area": "Ravello", "price": 224.0, "total": 1570.0, "rating": 4.81, "reviews": 745, "url": "https://www.airbnb.ca/rooms/2938612?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": true, "tier": "mid", "score": 141.7}, {"id": "32588731", "name": "Windows on heaven. Total sea view house!", "area": "Scala", "price": 224.0, "total": 1568.0, "rating": 4.98, "reviews": 445, "url": "https://www.airbnb.ca/rooms/32588731?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": false, "tier": "mid", "score": 139.6}, {"id": "19917103", "name": "Casa Vacanze Mir\u00f2 (Airbnb), Ravello", "area": "Ravello", "price": 320.0, "total": 2240.0, "rating": 5.0, "reviews": 417, "url": "https://www.airbnb.ca/rooms/19917103?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": false, "tier": "splurge", "score": 135.3}, {"id": "35930217", "name": "LUCY\u2019S HOUSE - comfortable apartment in Amalfi", "area": "Pontone", "price": 348.0, "total": 2433.0, "rating": 4.92, "reviews": 438, "url": "https://www.airbnb.ca/rooms/35930217?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": true, "tier": "splurge", "score": 135.2}, {"id": "3069031", "name": "Ocean view Martida_apartment studio", "area": "Praiano", "price": 296.0, "total": 2069.0, "rating": 4.92, "reviews": 390, "url": "https://www.airbnb.ca/rooms/3069031?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": false, "tier": "mid", "score": 131.5}, {"id": "18939770", "name": "Beata Solitudo Hostel - Mixed Room", "area": "Conca dei Marini", "price": 291.0, "total": 2037.0, "rating": 4.88, "reviews": 385, "url": "https://www.airbnb.ca/rooms/18939770?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": true, "tier": "mid", "score": 130.3}, {"id": "17735253", "name": "Beata Solitudo Hostel - Female Dorm", "area": "Conca dei Marini", "price": 42.0, "total": 291.0, "rating": 4.83, "reviews": 332, "url": "https://www.airbnb.ca/rooms/17735253?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": true, "tier": "budget", "score": 129.0}, {"id": "19538495", "name": "Home holiday \"Marygi\u00f2\"", "area": "Agerola", "price": 149.0, "total": 1041.0, "rating": 4.97, "reviews": 322, "url": "https://www.airbnb.ca/rooms/19538495?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": false, "tier": "budget", "score": 128.6}, {"id": "18071473", "name": "Alma House", "area": "Amalfi", "price": 270.0, "total": 1887.0, "rating": 4.8, "reviews": 374, "url": "https://www.airbnb.ca/rooms/18071473?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": true, "tier": "mid", "score": 128.0}, {"id": "43281874", "name": "Home overlooking Vesuvius on the hills of Castella", "area": "Other", "price": 177.0, "total": 1236.0, "rating": 4.97, "reviews": 319, "url": "https://www.airbnb.ca/rooms/43281874?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": false, "tier": "mid", "score": 127.8}, {"id": "617194", "name": "Albachiara-hiking Amalficoast-PathOfGods-Jasmine", "area": "Furore", "price": 122.0, "total": 852.0, "rating": 4.9, "reviews": 321, "url": "https://www.airbnb.ca/rooms/617194?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": true, "tier": "budget", "score": 127.7}, {"id": "13671263", "name": "EXCLUSIVE APARTAMENT your piece of paradise", "area": "Furore", "price": 455.0, "total": 3183.0, "rating": 4.98, "reviews": 370, "url": "https://www.airbnb.ca/rooms/13671263?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": false, "tier": "splurge", "score": 127.5}, {"id": "19488613", "name": "Amalfi Casa Mikr\u00f2", "area": "Amalfi", "price": 266.0, "total": 1862.0, "rating": 4.9, "reviews": 335, "url": "https://www.airbnb.ca/rooms/19488613?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": true, "tier": "mid", "score": 126.2}, {"id": "44836624", "name": "PARADISE APARTMENT", "area": "Agerola", "price": 144.0, "total": 1007.0, "rating": 4.95, "reviews": 300, "url": "https://www.airbnb.ca/rooms/44836624?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": false, "tier": "budget", "score": 126.1}, {"id": "12964626", "name": "AQUAMARINE BLUE, AMALFI COAST", "area": "Furore", "price": 210.0, "total": 1467.0, "rating": 4.89, "reviews": 324, "url": "https://www.airbnb.ca/rooms/12964626?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": true, "tier": "mid", "score": 126.0}, {"id": "47576133", "name": "Room with en-suite bathroom. Station super close!", "area": "Other", "price": 107.0, "total": 749.0, "rating": 4.94, "reviews": 281, "url": "https://www.airbnb.ca/rooms/47576133?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": false, "tier": "budget", "score": 124.8}, {"id": "14330246", "name": "Bomerano Apartments 50 meters from the Path of the", "area": "Agerola", "price": 164.0, "total": 1147.0, "rating": 4.87, "reviews": 302, "url": "https://www.airbnb.ca/rooms/14330246?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": true, "tier": "budget", "score": 124.3}, {"id": "2580261", "name": "Lovely Loft Positano with breakfast", "area": "Positano", "price": 449.0, "total": 3146.0, "rating": 4.8, "reviews": 362, "url": "https://www.airbnb.ca/rooms/2580261?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": false, "tier": "splurge", "score": 123.2}, {"id": "12802359", "name": "B&B la Palombara", "area": "Other", "price": 436.0, "total": 3055.0, "rating": 4.98, "reviews": 309, "url": "https://www.airbnb.ca/rooms/12802359?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": false, "tier": "splurge", "score": 121.8}, {"id": "48335949", "name": "Private room, Salerno Centre/Station", "area": "Other", "price": 99.0, "total": 693.0, "rating": 4.94, "reviews": 245, "url": "https://www.airbnb.ca/rooms/48335949?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": true, "tier": "budget", "score": 121.3}, {"id": "13277761", "name": "From Zio Nicola Piano di Sorrento House for Holida", "area": "Other", "price": 357.0, "total": 2498.0, "rating": 4.94, "reviews": 289, "url": "https://www.airbnb.ca/rooms/13277761?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": false, "tier": "splurge", "score": 120.6}, {"id": "191220", "name": "Agerola Private \u2013 Easy Check-in & Bus 2 Min Walk", "area": "Conca dei Marini", "price": 161.0, "total": 1130.0, "rating": 4.91, "reviews": 244, "url": "https://www.airbnb.ca/rooms/191220?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": true, "tier": "budget", "score": 119.4}, {"id": "9900192", "name": "Il Pertuso B&B, Teresa Room", "area": "Nocelle", "price": 282.0, "total": 1977.0, "rating": 4.92, "reviews": 259, "url": "https://www.airbnb.ca/rooms/9900192?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": false, "tier": "mid", "score": 118.7}, {"id": "12866730", "name": "The Palombara Capri room", "area": "Other", "price": 363.0, "total": 2540.0, "rating": 4.98, "reviews": 259, "url": "https://www.airbnb.ca/rooms/12866730?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": false, "tier": "splurge", "score": 118.2}, {"id": "41642520", "name": "My Habitat - Your home away from home", "area": "Other", "price": 150.0, "total": 1050.0, "rating": 4.96, "reviews": 217, "url": "https://www.airbnb.ca/rooms/41642520?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": true, "tier": "budget", "score": 117.9}, {"id": "13161568", "name": "Terry\u2019s Home", "area": "Other", "price": 366.0, "total": 2564.0, "rating": 4.89, "reviews": 266, "url": "https://www.airbnb.ca/rooms/13161568?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": true, "tier": "splurge", "score": 117.1}, {"id": "25073339", "name": "CRIS HOUSE - Mena", "area": "Atrani", "price": 307.0, "total": 2152.0, "rating": 4.82, "reviews": 261, "url": "https://www.airbnb.ca/rooms/25073339?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": true, "tier": "splurge", "score": 116.4}, {"id": "20491538", "name": "La Maison du Paradis B&B nel cuore di Salerno", "area": "Vietri sul Mare", "price": 270.0, "total": 1889.0, "rating": 4.96, "reviews": 223, "url": "https://www.airbnb.ca/rooms/20491538?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": false, "tier": "mid", "score": 116.1}, {"id": "1244910", "name": "2/4 people Cozy&Central Room in 1900's building", "area": "Other", "price": 183.0, "total": 1283.0, "rating": 4.87, "reviews": 223, "url": "https://www.airbnb.ca/rooms/1244910?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": true, "tier": "mid", "score": 116.0}, {"id": "5996171", "name": "IlPertusoB&B, Camera Luisa", "area": "Nocelle", "price": 282.0, "total": 1977.0, "rating": 4.93, "reviews": 228, "url": "https://www.airbnb.ca/rooms/5996171?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": true, "tier": "mid", "score": 115.8}, {"id": "29621244", "name": "Nocelle, Standard room", "area": "Nocelle", "price": 244.0, "total": 1705.0, "rating": 4.89, "reviews": 222, "url": "https://www.airbnb.ca/rooms/29621244?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": true, "tier": "mid", "score": 115.1}, {"id": "4498735", "name": "Apartment in Praiano, Amalfi Coast", "area": "Praiano", "price": 367.0, "total": 2570.0, "rating": 4.9, "reviews": 241, "url": "https://www.airbnb.ca/rooms/4498735?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": true, "tier": "splurge", "score": 114.8}, {"id": "32690686", "name": "Capo D'acqua 1 Retreat", "area": "Positano", "price": 184.0, "total": 1288.0, "rating": 4.94, "reviews": 196, "url": "https://www.airbnb.ca/rooms/32690686?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": false, "tier": "mid", "score": 114.7}, {"id": "47306992", "name": "Cozy Penthouse with panoramic terrace", "area": "Atrani", "price": 276.0, "total": 1930.0, "rating": 4.95, "reviews": 211, "url": "https://www.airbnb.ca/rooms/47306992?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": true, "tier": "mid", "score": 114.6}, {"id": "32715535", "name": "Capo D'acqua 3 Retreat", "area": "Positano", "price": 184.0, "total": 1288.0, "rating": 4.94, "reviews": 188, "url": "https://www.airbnb.ca/rooms/32715535?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": true, "tier": "mid", "score": 113.9}, {"id": "923862125538251337", "name": "Superior Double Room", "area": "Tramonti", "price": 338.0, "total": 2369.0, "rating": 4.91, "reviews": 222, "url": "https://www.airbnb.ca/rooms/923862125538251337?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": false, "tier": "splurge", "score": 113.6}, {"id": "628862022294633899", "name": "Accommodation in Downtown Salerno", "area": "Other", "price": 259.0, "total": 1812.0, "rating": 4.97, "reviews": 183, "url": "https://www.airbnb.ca/rooms/628862022294633899?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": false, "tier": "mid", "score": 112.5}, {"id": "5925780", "name": "a slice of paradise in Vietri on the Amalfi Coast", "area": "Vietri sul Mare", "price": 304.0, "total": 2129.0, "rating": 4.98, "reviews": 188, "url": "https://www.airbnb.ca/rooms/5925780?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": false, "tier": "splurge", "score": 112.3}, {"id": "44353120", "name": "Le Tre Rose, Sorrento Peninsula", "area": "Other", "price": 229.0, "total": 1604.0, "rating": 4.88, "reviews": 193, "url": "https://www.airbnb.ca/rooms/44353120?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": true, "tier": "mid", "score": 112.3}, {"id": "35607567", "name": "GStar Flat", "area": "Other", "price": 287.0, "total": 2008.0, "rating": 4.98, "reviews": 178, "url": "https://www.airbnb.ca/rooms/35607567?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": false, "tier": "mid", "score": 111.7}, {"id": "18995589", "name": "Casa Gentile", "area": "Praiano", "price": 362.0, "total": 2536.0, "rating": 4.94, "reviews": 201, "url": "https://www.airbnb.ca/rooms/18995589?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": false, "tier": "splurge", "score": 111.7}, {"id": "10570238", "name": "Al Sesto B&B Salerno, Double Room", "area": "Other", "price": 135.0, "total": 946.0, "rating": 4.91, "reviews": 161, "url": "https://www.airbnb.ca/rooms/10570238?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": false, "tier": "budget", "score": 111.6}, {"id": "7399365", "name": "Angle of Amalfi Coast", "area": "Furore", "price": 265.0, "total": 1855.0, "rating": 4.93, "reviews": 183, "url": "https://www.airbnb.ca/rooms/7399365?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": true, "tier": "mid", "score": 111.6}, {"id": "28946851", "name": "Cristina Apartment", "area": "Other", "price": 149.0, "total": 1044.0, "rating": 4.95, "reviews": 152, "url": "https://www.airbnb.ca/rooms/28946851?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": true, "tier": "budget", "score": 111.2}, {"id": "31773673", "name": "The Little House La Conca - Amalfi Coast", "area": "Conca dei Marini", "price": 359.0, "total": 2510.0, "rating": 4.97, "reviews": 184, "url": "https://www.airbnb.ca/rooms/31773673?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": false, "tier": "splurge", "score": 110.6}, {"id": "44262346", "name": "Luxury Apartment in the center of Salerno", "area": "Other", "price": 206.0, "total": 1445.0, "rating": 4.88, "reviews": 164, "url": "https://www.airbnb.ca/rooms/44262346?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": true, "tier": "mid", "score": 109.9}, {"id": "54101063", "name": "The nest of Maya -Panoramic terrace house.", "area": "Furore", "price": 231.0, "total": 1615.0, "rating": 4.95, "reviews": 154, "url": "https://www.airbnb.ca/rooms/54101063?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": true, "tier": "mid", "score": 109.8}, {"id": "2185074", "name": "Casa Bella 2", "area": "Positano", "price": 372.0, "total": 2602.0, "rating": 4.97, "reviews": 178, "url": "https://www.airbnb.ca/rooms/2185074?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": false, "tier": "splurge", "score": 109.8}, {"id": "26955479", "name": "Il Petrale, wonderful view of Amalfi", "area": "Pontone", "price": 274.0, "total": 1915.0, "rating": 4.95, "reviews": 162, "url": "https://www.airbnb.ca/rooms/26955479?check_in=2026-08-22&check_out=2026-08-29&adults=2", "guest_fav": true, "tier": "mid", "score": 109.7}];
const traces = [{"type": "scatter3d", "mode": "markers", "name": "\ud83d\udcb0 Under $175/n (11)", "x": [42.0, 149.0, 122.0, 144.0, 107.0, 164.0, 99.0, 161.0, 150.0, 135.0, 149.0], "y": [4.83, 4.97, 4.9, 4.95, 4.94, 4.87, 4.94, 4.91, 4.96, 4.91, 4.95], "z": [332, 322, 321, 300, 281, 302, 245, 244, 217, 161, 152], "text": ["<b>Beata Solitudo Hostel - Female Dorm</b><br>\ud83d\udccd Conca dei Marini<br><br><b>$42</b>/night \u00b7 $291 for 7 nights<br>\u2605 4.83 \u00b7 332 reviews<br><br>\ud83c\udfc6 Guest Favorite", "<b>Home holiday \"Marygi\u00f2\"</b><br>\ud83d\udccd Agerola<br><br><b>$149</b>/night \u00b7 $1041 for 7 nights<br>\u2605 4.97 \u00b7 322 reviews", "<b>Albachiara-hiking Amalficoast-PathOfGods-Jasmine</b><br>\ud83d\udccd Furore<br><br><b>$122</b>/night \u00b7 $852 for 7 nights<br>\u2605 4.90 \u00b7 321 reviews<br><br>\ud83c\udfc6 Guest Favorite", "<b>PARADISE APARTMENT</b><br>\ud83d\udccd Agerola<br><br><b>$144</b>/night \u00b7 $1007 for 7 nights<br>\u2605 4.95 \u00b7 300 reviews", "<b>Room with en-suite bathroom. Station super close!</b><br>\ud83d\udccd Other<br><br><b>$107</b>/night \u00b7 $749 for 7 nights<br>\u2605 4.94 \u00b7 281 reviews", "<b>Bomerano Apartments 50 meters from the Path of the Gods</b><br>\ud83d\udccd Agerola<br><br><b>$164</b>/night \u00b7 $1147 for 7 nights<br>\u2605 4.87 \u00b7 302 reviews<br><br>\ud83c\udfc6 Guest Favorite", "<b>Private room, Salerno Centre/Station</b><br>\ud83d\udccd Other<br><br><b>$99</b>/night \u00b7 $693 for 7 nights<br>\u2605 4.94 \u00b7 245 reviews<br><br>\ud83c\udfc6 Guest Favorite", "<b>Agerola Private \u2013 Easy Check-in & Bus 2 Min Walk</b><br>\ud83d\udccd Conca dei Marini<br><br><b>$161</b>/night \u00b7 $1130 for 7 nights<br>\u2605 4.91 \u00b7 244 reviews<br><br>\ud83c\udfc6 Guest Favorite", "<b>My Habitat - Your home away from home</b><br>\ud83d\udccd Other<br><br><b>$150</b>/night \u00b7 $1050 for 7 nights<br>\u2605 4.96 \u00b7 217 reviews<br><br>\ud83c\udfc6 Guest Favorite", "<b>Al Sesto B&B Salerno, Double Room</b><br>\ud83d\udccd Other<br><br><b>$135</b>/night \u00b7 $946 for 7 nights<br>\u2605 4.91 \u00b7 161 reviews", "<b>Cristina Apartment</b><br>\ud83d\udccd Other<br><br><b>$149</b>/night \u00b7 $1044 for 7 nights<br>\u2605 4.95 \u00b7 152 reviews<br><br>\ud83c\udfc6 Guest Favorite"], "customdata": ["https://www.airbnb.ca/rooms/17735253?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/19538495?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/617194?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/44836624?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/47576133?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/14330246?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/48335949?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/191220?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/41642520?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/10570238?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/28946851?check_in=2026-08-22&check_out=2026-08-29&adults=2"], "hovertemplate": "%{text}<extra></extra>", "marker": {"size": [14, 9, 14, 9, 9, 14, 14, 14, 14, 9, 14], "color": "#2d8a4e", "opacity": 0.9, "line": {"width": 1, "color": "rgba(255,255,255,0.6)"}}}, {"type": "scatter3d", "mode": "markers", "name": "\u2b50 $175\u2013300/n (24)", "x": [185.0, 224.0, 224.0, 296.0, 291.0, 270.0, 177.0, 266.0, 210.0, 282.0, 270.0, 183.0, 282.0, 244.0, 184.0, 276.0, 184.0, 259.0, 229.0, 287.0, 265.0, 206.0, 231.0, 274.0], "y": [4.8, 4.81, 4.98, 4.92, 4.88, 4.8, 4.97, 4.9, 4.89, 4.92, 4.96, 4.87, 4.93, 4.89, 4.94, 4.95, 4.94, 4.97, 4.88, 4.98, 4.93, 4.88, 4.95, 4.95], "z": [619, 745, 445, 390, 385, 374, 319, 335, 324, 259, 223, 223, 228, 222, 196, 211, 188, 183, 193, 178, 183, 164, 154, 162], "text": ["<b>Full relaxation</b><br>\ud83d\udccd Agerola<br><br><b>$185</b>/night \u00b7 $1295 for 7 nights<br>\u2605 4.80 \u00b7 619 reviews", "<b>unbelievable new house sea view</b><br>\ud83d\udccd Ravello<br><br><b>$224</b>/night \u00b7 $1570 for 7 nights<br>\u2605 4.81 \u00b7 745 reviews<br><br>\ud83c\udfc6 Guest Favorite", "<b>Windows on heaven. Total sea view house!</b><br>\ud83d\udccd Scala<br><br><b>$224</b>/night \u00b7 $1568 for 7 nights<br>\u2605 4.98 \u00b7 445 reviews", "<b>Ocean view Martida_apartment studio</b><br>\ud83d\udccd Praiano<br><br><b>$296</b>/night \u00b7 $2069 for 7 nights<br>\u2605 4.92 \u00b7 390 reviews", "<b>Beata Solitudo Hostel - Mixed Room</b><br>\ud83d\udccd Conca dei Marini<br><br><b>$291</b>/night \u00b7 $2037 for 7 nights<br>\u2605 4.88 \u00b7 385 reviews<br><br>\ud83c\udfc6 Guest Favorite", "<b>Alma House</b><br>\ud83d\udccd Amalfi<br><br><b>$270</b>/night \u00b7 $1887 for 7 nights<br>\u2605 4.80 \u00b7 374 reviews<br><br>\ud83c\udfc6 Guest Favorite", "<b>Home overlooking Vesuvius on the hills of Castellammare</b><br>\ud83d\udccd Other<br><br><b>$177</b>/night \u00b7 $1236 for 7 nights<br>\u2605 4.97 \u00b7 319 reviews", "<b>Amalfi Casa Mikr\u00f2</b><br>\ud83d\udccd Amalfi<br><br><b>$266</b>/night \u00b7 $1862 for 7 nights<br>\u2605 4.90 \u00b7 335 reviews<br><br>\ud83c\udfc6 Guest Favorite", "<b>AQUAMARINE BLUE, AMALFI COAST</b><br>\ud83d\udccd Furore<br><br><b>$210</b>/night \u00b7 $1467 for 7 nights<br>\u2605 4.89 \u00b7 324 reviews<br><br>\ud83c\udfc6 Guest Favorite", "<b>Il Pertuso B&B, Teresa Room</b><br>\ud83d\udccd Nocelle<br><br><b>$282</b>/night \u00b7 $1977 for 7 nights<br>\u2605 4.92 \u00b7 259 reviews", "<b>La Maison du Paradis B&B nel cuore di Salerno</b><br>\ud83d\udccd Vietri sul Mare<br><br><b>$270</b>/night \u00b7 $1889 for 7 nights<br>\u2605 4.96 \u00b7 223 reviews", "<b>2/4 people Cozy&Central Room in 1900's building</b><br>\ud83d\udccd Other<br><br><b>$183</b>/night \u00b7 $1283 for 7 nights<br>\u2605 4.87 \u00b7 223 reviews<br><br>\ud83c\udfc6 Guest Favorite", "<b>IlPertusoB&B, Camera Luisa</b><br>\ud83d\udccd Nocelle<br><br><b>$282</b>/night \u00b7 $1977 for 7 nights<br>\u2605 4.93 \u00b7 228 reviews<br><br>\ud83c\udfc6 Guest Favorite", "<b>Nocelle, Standard room</b><br>\ud83d\udccd Nocelle<br><br><b>$244</b>/night \u00b7 $1705 for 7 nights<br>\u2605 4.89 \u00b7 222 reviews<br><br>\ud83c\udfc6 Guest Favorite", "<b>Capo D'acqua 1 Retreat</b><br>\ud83d\udccd Positano<br><br><b>$184</b>/night \u00b7 $1288 for 7 nights<br>\u2605 4.94 \u00b7 196 reviews", "<b>Cozy Penthouse with panoramic terrace</b><br>\ud83d\udccd Atrani<br><br><b>$276</b>/night \u00b7 $1930 for 7 nights<br>\u2605 4.95 \u00b7 211 reviews<br><br>\ud83c\udfc6 Guest Favorite", "<b>Capo D'acqua 3 Retreat</b><br>\ud83d\udccd Positano<br><br><b>$184</b>/night \u00b7 $1288 for 7 nights<br>\u2605 4.94 \u00b7 188 reviews<br><br>\ud83c\udfc6 Guest Favorite", "<b>Accommodation in Downtown Salerno</b><br>\ud83d\udccd Other<br><br><b>$259</b>/night \u00b7 $1812 for 7 nights<br>\u2605 4.97 \u00b7 183 reviews", "<b>Le Tre Rose, Sorrento Peninsula</b><br>\ud83d\udccd Other<br><br><b>$229</b>/night \u00b7 $1604 for 7 nights<br>\u2605 4.88 \u00b7 193 reviews<br><br>\ud83c\udfc6 Guest Favorite", "<b>GStar Flat</b><br>\ud83d\udccd Other<br><br><b>$287</b>/night \u00b7 $2008 for 7 nights<br>\u2605 4.98 \u00b7 178 reviews", "<b>Angle of Amalfi Coast</b><br>\ud83d\udccd Furore<br><br><b>$265</b>/night \u00b7 $1855 for 7 nights<br>\u2605 4.93 \u00b7 183 reviews<br><br>\ud83c\udfc6 Guest Favorite", "<b>Luxury Apartment in the center of Salerno</b><br>\ud83d\udccd Other<br><br><b>$206</b>/night \u00b7 $1445 for 7 nights<br>\u2605 4.88 \u00b7 164 reviews<br><br>\ud83c\udfc6 Guest Favorite", "<b>The nest of Maya -Panoramic terrace house.</b><br>\ud83d\udccd Furore<br><br><b>$231</b>/night \u00b7 $1615 for 7 nights<br>\u2605 4.95 \u00b7 154 reviews<br><br>\ud83c\udfc6 Guest Favorite", "<b>Il Petrale, wonderful view of Amalfi</b><br>\ud83d\udccd Pontone<br><br><b>$274</b>/night \u00b7 $1915 for 7 nights<br>\u2605 4.95 \u00b7 162 reviews<br><br>\ud83c\udfc6 Guest Favorite"], "customdata": ["https://www.airbnb.ca/rooms/6690135?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/2938612?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/32588731?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/3069031?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/18939770?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/18071473?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/43281874?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/19488613?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/12964626?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/9900192?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/20491538?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/1244910?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/5996171?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/29621244?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/32690686?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/47306992?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/32715535?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/628862022294633899?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/44353120?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/35607567?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/7399365?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/44262346?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/54101063?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/26955479?check_in=2026-08-22&check_out=2026-08-29&adults=2"], "hovertemplate": "%{text}<extra></extra>", "marker": {"size": [9, 14, 9, 9, 14, 14, 9, 14, 14, 9, 9, 14, 14, 14, 9, 14, 14, 9, 14, 9, 14, 14, 14, 14], "color": "#0077b6", "opacity": 0.9, "line": {"width": 1, "color": "rgba(255,255,255,0.6)"}}}, {"type": "scatter3d", "mode": "markers", "name": "\u2728 Over $300/n (15)", "x": [320.0, 348.0, 455.0, 449.0, 436.0, 357.0, 363.0, 366.0, 307.0, 367.0, 338.0, 304.0, 362.0, 359.0, 372.0], "y": [5.0, 4.92, 4.98, 4.8, 4.98, 4.94, 4.98, 4.89, 4.82, 4.9, 4.91, 4.98, 4.94, 4.97, 4.97], "z": [417, 438, 370, 362, 309, 289, 259, 266, 261, 241, 222, 188, 201, 184, 178], "text": ["<b>Casa Vacanze Mir\u00f2 (Airbnb), Ravello</b><br>\ud83d\udccd Ravello<br><br><b>$320</b>/night \u00b7 $2240 for 7 nights<br>\u2605 5.00 \u00b7 417 reviews", "<b>LUCY\u2019S HOUSE - comfortable apartment in Amalfi</b><br>\ud83d\udccd Pontone<br><br><b>$348</b>/night \u00b7 $2433 for 7 nights<br>\u2605 4.92 \u00b7 438 reviews<br><br>\ud83c\udfc6 Guest Favorite", "<b>EXCLUSIVE APARTAMENT your piece of paradise</b><br>\ud83d\udccd Furore<br><br><b>$455</b>/night \u00b7 $3183 for 7 nights<br>\u2605 4.98 \u00b7 370 reviews", "<b>Lovely Loft Positano with breakfast</b><br>\ud83d\udccd Positano<br><br><b>$449</b>/night \u00b7 $3146 for 7 nights<br>\u2605 4.80 \u00b7 362 reviews", "<b>B&B la Palombara</b><br>\ud83d\udccd Other<br><br><b>$436</b>/night \u00b7 $3055 for 7 nights<br>\u2605 4.98 \u00b7 309 reviews", "<b>From Zio Nicola Piano di Sorrento House for Holiday</b><br>\ud83d\udccd Other<br><br><b>$357</b>/night \u00b7 $2498 for 7 nights<br>\u2605 4.94 \u00b7 289 reviews", "<b>The Palombara Capri room</b><br>\ud83d\udccd Other<br><br><b>$363</b>/night \u00b7 $2540 for 7 nights<br>\u2605 4.98 \u00b7 259 reviews", "<b>Terry\u2019s Home</b><br>\ud83d\udccd Other<br><br><b>$366</b>/night \u00b7 $2564 for 7 nights<br>\u2605 4.89 \u00b7 266 reviews<br><br>\ud83c\udfc6 Guest Favorite", "<b>CRIS HOUSE - Mena</b><br>\ud83d\udccd Atrani<br><br><b>$307</b>/night \u00b7 $2152 for 7 nights<br>\u2605 4.82 \u00b7 261 reviews<br><br>\ud83c\udfc6 Guest Favorite", "<b>Apartment in Praiano, Amalfi Coast</b><br>\ud83d\udccd Praiano<br><br><b>$367</b>/night \u00b7 $2570 for 7 nights<br>\u2605 4.90 \u00b7 241 reviews<br><br>\ud83c\udfc6 Guest Favorite", "<b>Superior Double Room</b><br>\ud83d\udccd Tramonti<br><br><b>$338</b>/night \u00b7 $2369 for 7 nights<br>\u2605 4.91 \u00b7 222 reviews", "<b>a slice of paradise in Vietri on the Amalfi Coast</b><br>\ud83d\udccd Vietri sul Mare<br><br><b>$304</b>/night \u00b7 $2129 for 7 nights<br>\u2605 4.98 \u00b7 188 reviews", "<b>Casa Gentile</b><br>\ud83d\udccd Praiano<br><br><b>$362</b>/night \u00b7 $2536 for 7 nights<br>\u2605 4.94 \u00b7 201 reviews", "<b>The Little House La Conca - Amalfi Coast</b><br>\ud83d\udccd Conca dei Marini<br><br><b>$359</b>/night \u00b7 $2510 for 7 nights<br>\u2605 4.97 \u00b7 184 reviews", "<b>Casa Bella 2</b><br>\ud83d\udccd Positano<br><br><b>$372</b>/night \u00b7 $2602 for 7 nights<br>\u2605 4.97 \u00b7 178 reviews"], "customdata": ["https://www.airbnb.ca/rooms/19917103?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/35930217?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/13671263?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/2580261?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/12802359?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/13277761?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/12866730?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/13161568?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/25073339?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/4498735?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/923862125538251337?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/5925780?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/18995589?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/31773673?check_in=2026-08-22&check_out=2026-08-29&adults=2", "https://www.airbnb.ca/rooms/2185074?check_in=2026-08-22&check_out=2026-08-29&adults=2"], "hovertemplate": "%{text}<extra></extra>", "marker": {"size": [9, 14, 9, 9, 9, 9, 9, 14, 14, 14, 9, 9, 9, 9, 9], "color": "#e63946", "opacity": 0.9, "line": {"width": 1, "color": "rgba(255,255,255,0.6)"}}}];

const layout = {
  scene: {
    xaxis: {
      title: { text: 'Price / Night (CAD)', font: { size: 12, color: '#6b7280', family: 'Inter' } },
      gridcolor: '#e5e7eb', zerolinecolor: '#d1d5db', color: '#6b7280',
      range: [0, 500], backgroundcolor: '#faf8f5'
    },
    yaxis: {
      title: { text: 'Guest Rating', font: { size: 12, color: '#6b7280', family: 'Inter' } },
      gridcolor: '#e5e7eb', zerolinecolor: '#d1d5db', color: '#6b7280',
      range: [4.75, 5.02], dtick: 0.05, backgroundcolor: '#faf8f5'
    },
    zaxis: {
      title: { text: 'Number of Reviews', font: { size: 12, color: '#6b7280', family: 'Inter' } },
      gridcolor: '#e5e7eb', zerolinecolor: '#d1d5db', color: '#6b7280',
      backgroundcolor: '#faf8f5'
    },
    bgcolor: '#faf8f5',
    camera: { eye: { x: 1.6, y: 1.4, z: 0.9 }, center: { x: 0, y: 0, z: -0.05 } },
    aspectmode: 'manual',
    aspectratio: { x: 1.2, y: 0.7, z: 1 }
  },
  paper_bgcolor: '#faf8f5',
  plot_bgcolor: '#faf8f5',
  margin: { l: 0, r: 0, t: 10, b: 0 },
  legend: {
    x: 0.5, xanchor: 'center', y: -0.02, orientation: 'h',
    bgcolor: 'rgba(255,255,255,0.9)', bordercolor: '#e8e4df', borderwidth: 1,
    font: { color: '#374151', size: 12, family: 'Inter' }
  },
  hoverlabel: {
    bgcolor: 'white', bordercolor: '#e8e4df',
    font: { family: 'Inter, sans-serif', size: 12, color: '#1a1a2e' },
    align: 'left'
  }
};

Plotly.newPlot('plot3d', traces, layout, {
  responsive: true, displayModeBar: true,
  modeBarButtonsToRemove: ['toImage', 'sendDataToCloud'], displaylogo: false
});

document.getElementById('plot3d').on('plotly_click', function(e) {
  const url = e.points[0].customdata;
  const listing = allListings.find(l => l.url === url);
  if (listing) showDetail(listing);
});

setTimeout(() => {
  const h = document.getElementById('controlsHint');
  h.style.opacity = '0';
  setTimeout(() => h.style.display = 'none', 500);
}, 6000);

function showDetail(l) {
  document.getElementById('dpName').textContent = l.name;
  document.getElementById('dpArea').textContent = 'üìç ' + l.area;
  document.getElementById('dpPrice').textContent = '$' + l.price.toFixed(0);
  document.getElementById('dpTotal').textContent = '$' + l.total.toFixed(0);
  document.getElementById('dpRating').textContent = '‚òÖ ' + l.rating.toFixed(2);
  document.getElementById('dpReviews').textContent = l.reviews;
  document.getElementById('dpLink').href = l.url;
  let b = '';
  if (l.guest_fav) b += '<span class="dp-badge gold">üèÜ Guest Favorite</span>';
  if (l.area === 'Agerola') b += '<span class="dp-badge green">üè† Near Home Base</span>';
  if (l.tier === 'budget') b += '<span class="dp-badge green">üí∞ Budget Pick</span>';
  else if (l.tier === 'mid') b += '<span class="dp-badge blue">‚≠ê Mid-Range</span>';
  else b += '<span class="dp-badge red">‚ú® Splurge</span>';
  document.getElementById('dpBadges').innerHTML = b;
  document.getElementById('detailPanel').classList.add('visible');
}

function closeDetail() {
  document.getElementById('detailPanel').classList.remove('visible');
}

let currentSort = 'score', currentSearch = '';

function renderSidebar() {
  let f = allListings.filter(l => {
    if (!currentSearch) return true;
    const q = currentSearch.toLowerCase();
    return l.name.toLowerCase().includes(q) || l.area.toLowerCase().includes(q);
  });
  switch(currentSort) {
    case 'score': f.sort((a,b) => b.score - a.score); break;
    case 'price-asc': f.sort((a,b) => a.price - b.price); break;
    case 'rating': f.sort((a,b) => b.rating - a.rating); break;
    case 'reviews': f.sort((a,b) => b.reviews - a.reviews); break;
  }
  document.getElementById('sidebarList').innerHTML = f.map(l => `
    <div class="lc" data-id="${l.id}" onclick="handleClick('${l.id}')">
      <div class="lc-name">${l.guest_fav ? 'üèÜ ' : ''}${l.name}</div>
      <div class="lc-meta">
        <span class="lc-price ${l.tier}">$${l.price.toFixed(0)}/n</span>
        <span class="lc-rating">‚òÖ ${l.rating.toFixed(2)}</span>
        <span>${l.reviews} reviews</span>
      </div>
      <span class="lc-area">${l.area}</span>
    </div>
  `).join('');
  document.getElementById('sidebarCount').textContent = f.length + ' of 50 top picks';
}

function handleClick(id) {
  const l = allListings.find(l => l.id === id);
  if (l) {
    showDetail(l);
    document.querySelectorAll('.lc').forEach(c => c.classList.remove('highlighted'));
    document.querySelector(`[data-id="${id}"]`)?.classList.add('highlighted');
  }
}

document.querySelectorAll('.filter-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    currentSort = btn.dataset.sort;
    renderSidebar();
  });
});

document.getElementById('searchInput').addEventListener('input', e => {
  currentSearch = e.target.value;
  renderSidebar();
});

renderSidebar();
</script>
</body>
</html>